import{A as j,E as D,u as G,r as d,o as H,j as W,b as a,c as n,F as B,f as I,n as V,d as s,t as p,k as J,w as k,h as C,i as S,e as r,_ as h,a as Y,s as Z,l as ee,m as R,v as F,p as z,q as U}from"./index-7c8e1384.js";import{p as q}from"./products-aed9e737.js";import{_ as $}from"./Button-4b79b8c6.js";import{B as te}from"./base-6b721dc9.js";import{_ as se}from"./TextInput-5bc7bf51.js";import{_ as M}from"./Badge-a130e394.js";class le extends te{async getBanners(){try{const m=`${j.ENDPOINTS.BANNERS.LIST}`,o=await this.makeRequest(m);return this.handleResponse(o)}catch(m){return console.error("Get banners error:",m),{success:!1,message:D.BANNERS.FETCH_FAILED}}}async getBanner(m){try{if(!m)return{success:!1,message:"Banner ID is required"};const o=`${j.ENDPOINTS.BANNERS.DETAIL}`,i=await this.makeRequest(o,{method:"POST",body:JSON.stringify({banner_id:m})});return this.handleResponse(i)}catch(o){return console.error("Get banner error:",o),{success:!1,message:D.BANNERS.NOT_FOUND}}}}const oe=new le,ae={class:"relative w-full h-64 md:h-80 lg:h-96 overflow-hidden rounded-lg shadow-lg"},ne=["src","alt"],re={class:"absolute inset-0 flex items-center justify-center"},ie={class:"text-center text-white px-4"},ue={class:"text-2xl md:text-4xl lg:text-5xl font-bold mb-4"},ce={class:"text-lg md:text-xl lg:text-2xl mb-6 max-w-2xl"},de={key:0,class:"absolute inset-0 flex items-center justify-center bg-gray-200"},ge={key:1,class:"absolute inset-0 flex items-center justify-center bg-gray-200"},ve={class:"text-center"},pe={key:2,class:"absolute bottom-4 left-1/2 transform -translate-x-1/2 flex space-x-2"},me=["onClick"],fe={key:3,class:"absolute inset-y-0 left-0 flex items-center"},he={key:4,class:"absolute inset-y-0 right-0 flex items-center"},ye={__name:"Banner",setup(O){const m=G(),o=d([]),i=d(0),x=d(!0),y=d("");let g=null;const b=async()=>{x.value=!0,y.value="";try{const u=await oe.getBanners();u.success?(o.value=u.data.filter(c=>c.is_active),console.log("Loaded banners:",o.value)):y.value=u.message||"Failed to load banners"}catch(u){y.value="Failed to load banners",console.error("Load banners error:",u)}finally{x.value=!1}},f=()=>{o.value.length>1&&(i.value=(i.value+1)%o.value.length)},w=()=>{o.value.length>1&&(i.value=i.value===0?o.value.length-1:i.value-1)},_=()=>{o.value.length>1&&(g=setInterval(f,5e3))},A=()=>{g&&(clearInterval(g),g=null)},N=u=>{u.link&&(u.link.startsWith("http")?window.open(u.link,"_blank"):m.push(u.link))};return H(async()=>{await b(),o.value.length>1&&_()}),W(()=>{A()}),(u,c)=>(a(),n("div",ae,[(a(!0),n(B,null,I(o.value,(v,P)=>(a(),n("div",{key:v.id,class:V(["absolute inset-0 transition-opacity duration-1000 ease-in-out",i.value===P?"opacity-100":"opacity-0"])},[s("img",{src:v.image,alt:v.title,class:"w-full h-full object-cover"},null,8,ne),c[0]||(c[0]=s("div",{class:"absolute inset-0 bg-black bg-opacity-30"},null,-1)),s("div",re,[s("div",ie,[s("h2",ue,p(v.title),1),s("p",ce,p(v.subtitle),1),v.button_text?(a(),J($,{key:0,variant:"primary",size:"lg",onClick:E=>N(v),class:"bg-white text-purple-600 hover:bg-gray-100"},{default:k(()=>[C(p(v.button_text),1)]),_:2},1032,["onClick"])):S("",!0)])])],2))),128)),x.value?(a(),n("div",de,[...c[1]||(c[1]=[s("div",{class:"animate-spin rounded-full h-12 w-12 border-b-2 border-purple-600"},null,-1)])])):S("",!0),y.value&&!x.value?(a(),n("div",ge,[s("div",ve,[r(h,{name:"image",class:"w-16 h-16 text-gray-400 mx-auto mb-4"}),c[2]||(c[2]=s("p",{class:"text-gray-600"},"Failed to load banners",-1))])])):S("",!0),o.value.length>1?(a(),n("div",pe,[(a(!0),n(B,null,I(o.value,(v,P)=>(a(),n("button",{key:`dot-${v.id}`,onClick:E=>i.value=P,class:V(["w-3 h-3 rounded-full transition-colors duration-300",i.value===P?"bg-white":"bg-white bg-opacity-50"])},null,10,me))),128))])):S("",!0),o.value.length>1?(a(),n("div",fe,[s("button",{onClick:w,class:"ml-4 p-2 rounded-full bg-black bg-opacity-30 text-white hover:bg-opacity-50 transition-all"},[r(h,{name:"chevron-left",class:"w-6 h-6"})])])):S("",!0),o.value.length>1?(a(),n("div",he,[s("button",{onClick:f,class:"mr-4 p-2 rounded-full bg-black bg-opacity-30 text-white hover:bg-opacity-50 transition-all"},[r(h,{name:"chevron-right",class:"w-6 h-6"})])])):S("",!0)]))}},be={class:"p-4 md:p-6"},xe={class:"mb-8"},we={class:"flex mb-8"},_e={class:"bg-white rounded-lg shadow p-6 mb-8"},ke={class:"grid grid-cols-1 md:grid-cols-4 gap-4"},Ce=["value"],Se={key:0,class:"text-center py-12"},Pe={key:1,class:"text-center py-12"},$e={class:"text-gray-600 mb-4"},Ne={key:2,class:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-6"},Be={class:"aspect-w-16 aspect-h-12 bg-gradient-to-br from-purple-100 to-pink-100 h-64 flex items-center justify-center relative"},Ie=["src","alt"],Ae={class:"absolute top-2 right-2"},Ee={class:"absolute top-2 left-2"},Le={class:"p-4"},Re={class:"font-semibold text-gray-900 mb-2"},Fe={class:"text-sm text-gray-600 mb-3 line-clamp-2"},Ve={class:"flex items-center justify-between mb-3"},Oe={class:"text-lg font-bold text-purple-600"},Te={key:0,class:"text-sm text-gray-500 line-through ml-2"},je={class:"flex items-center"},De={class:"flex text-yellow-400"},ze={class:"text-xs text-gray-500 ml-1"},Ue={class:"flex justify-between items-center"},qe={key:3,class:"text-center py-12"},Ke={__name:"Products",setup(O){G();const m=Y();Z();const o=d([]),i=d([]),x=d(!1),y=d(null),g=d(""),b=d(""),f=d(""),w=d("featured"),_=d([]),A=ee(()=>{let l=[...o.value];if(g.value){const e=g.value.toLowerCase();l=l.filter(t=>t.name.toLowerCase().includes(e)||t.description.toLowerCase().includes(e)||t.category.toLowerCase().includes(e))}switch(b.value&&(l=l.filter(e=>e.category===b.value)),f.value&&(l=l.filter(e=>{const t=e.price;switch(f.value){case"0-5000":return t<=5e3;case"5000-15000":return t>5e3&&t<=15e3;case"15000-30000":return t>15e3&&t<=3e4;case"30000+":return t>3e4;default:return!0}})),w.value){case"price-low":l.sort((e,t)=>e.price-t.price);break;case"price-high":l.sort((e,t)=>t.price-e.price);break;case"newest":l.sort((e,t)=>new Date(t.created_at)-new Date(e.created_at));break;case"popular":l.sort((e,t)=>t.rating-e.rating);break}return l}),N=async()=>{x.value=!0,y.value=null;try{const l=await q.getProducts();o.value=l.data||[],console.log("Products loaded:",o.value.length)}catch(l){console.error("Error loading products:",l),y.value="Failed to load products. Please try again."}finally{x.value=!1}},u=async()=>{try{const l=await q.getCategories();i.value=l.data||[],console.log("Categories loaded:",i.value.length)}catch(l){console.error("Error loading categories:",l)}},c=()=>{console.log("Filtering products with:",{searchQuery:g.value,selectedCategory:b.value,priceRange:f.value,sortBy:w.value})},v=()=>{g.value="",b.value="",f.value="",w.value="featured"},P=l=>{m.addItem(l),console.log("Added to cart:",l.name)},E=l=>{const e=_.value.findIndex(t=>t.id===l.id);e>-1?_.value.splice(e,1):_.value.push(l),localStorage.setItem("wishlist",JSON.stringify(_.value))},Q=l=>_.value.some(e=>e.id===l),K=l=>l===0?"danger":l<5?"warning":"success",X=async()=>{console.log("Refreshing products data..."),await N(),console.log("Products refreshed. Current count:",o.value.length)},T=()=>{document.hidden||(console.log("Page became visible, refreshing products..."),X())};return H(async()=>{console.log("Products page mounted, initializing...");const l=localStorage.getItem("wishlist");l&&(_.value=JSON.parse(l)),console.log("Initial state:",{selectedCategory:b.value,searchQuery:g.value,priceRange:f.value,sortBy:w.value}),await Promise.all([N(),u()]),console.log("Initialization complete. Products loaded:",o.value.length),document.addEventListener("visibilitychange",T)}),W(()=>{document.removeEventListener("visibilitychange",T)}),(l,e)=>(a(),n("div",be,[s("div",xe,[r(ye)]),e[22]||(e[22]=s("section",{class:"bg-gradient-to-r from-purple-600 to-pink-600 text-white py-8 md:py-16 rounded-lg mb-8"},[s("div",{class:"text-center px-4"},[s("h2",{class:"text-2xl md:text-4xl font-bold mb-4"},"Our Collection")])],-1)),s("nav",we,[r($,{variant:"ghost",size:"sm",onClick:e[0]||(e[0]=t=>l.$router.push("/"))},{default:k(()=>[r(h,{name:"home",class:"w-4 h-4 mr-2"}),e[5]||(e[5]=C(" Home ",-1))]),_:1}),e[6]||(e[6]=s("span",{class:"mx-2 text-gray-400"},"/",-1)),e[7]||(e[7]=s("span",{class:"text-gray-600"},"Products",-1))]),s("div",_e,[s("div",ke,[s("div",null,[e[8]||(e[8]=s("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Search",-1)),r(se,{modelValue:g.value,"onUpdate:modelValue":e[1]||(e[1]=t=>g.value=t),placeholder:"Search sarees...",onInput:c},null,8,["modelValue"])]),s("div",null,[e[10]||(e[10]=s("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Category",-1)),R(s("select",{"onUpdate:modelValue":e[2]||(e[2]=t=>b.value=t),onChange:c,class:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-purple-500"},[e[9]||(e[9]=s("option",{value:""},"All Categories",-1)),(a(!0),n(B,null,I(i.value,t=>(a(),n("option",{key:t,value:t},p(t),9,Ce))),128))],544),[[F,b.value]])]),s("div",null,[e[12]||(e[12]=s("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Price Range",-1)),R(s("select",{"onUpdate:modelValue":e[3]||(e[3]=t=>f.value=t),onChange:c,class:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-purple-500"},[...e[11]||(e[11]=[z('<option value="">All Prices</option><option value="0-5000">Under ₹5,000</option><option value="5000-15000">₹5,000 - ₹15,000</option><option value="15000-30000">₹15,000 - ₹30,000</option><option value="30000+">Above ₹30,000</option>',5)])],544),[[F,f.value]])]),s("div",null,[e[14]||(e[14]=s("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Sort By",-1)),R(s("select",{"onUpdate:modelValue":e[4]||(e[4]=t=>w.value=t),onChange:c,class:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-purple-500"},[...e[13]||(e[13]=[z('<option value="featured">Featured</option><option value="price-low">Price: Low to High</option><option value="price-high">Price: High to Low</option><option value="newest">Newest First</option><option value="popular">Most Popular</option>',5)])],544),[[F,w.value]])])])]),x.value?(a(),n("div",Se,[...e[15]||(e[15]=[s("div",{class:"inline-block animate-spin rounded-full h-8 w-8 border-b-2 border-purple-600"},null,-1),s("p",{class:"mt-2 text-gray-600"},"Loading products...",-1)])])):y.value?(a(),n("div",Pe,[r(h,{name:"alert-circle",class:"w-16 h-16 text-red-400 mx-auto mb-4"}),e[17]||(e[17]=s("h3",{class:"text-lg font-medium text-gray-900 mb-2"},"Error loading products",-1)),s("p",$e,p(y.value),1),r($,{onClick:N},{default:k(()=>[...e[16]||(e[16]=[C("Try Again",-1)])]),_:1})])):A.value.length>0?(a(),n("div",Ne,[(a(!0),n(B,null,I(A.value,t=>(a(),n("div",{key:t.id,class:"bg-white border rounded-lg overflow-hidden hover:shadow-lg transition-shadow"},[s("div",Be,[t.image?(a(),n("img",{key:0,src:t.image,alt:t.product_name,class:"w-full h-full object-cover"},null,8,Ie)):(a(),J(h,{key:1,name:"image",class:"w-16 h-16 text-purple-400"})),s("div",Ae,[r(M,{variant:K(t.stock)},{default:k(()=>[C(p(t.stock)+" left ",1)]),_:2},1032,["variant"])]),s("div",Ee,[r(M,{variant:"secondary",class:"text-xs"},{default:k(()=>[C(p(t.category),1)]),_:2},1024)])]),s("div",Le,[s("h3",Re,p(t.name),1),s("p",Fe,p(t.description),1),s("div",Ve,[s("div",null,[s("span",Oe,"₹"+p(t.price.toLocaleString()),1),t.originalPrice?(a(),n("span",Te," ₹"+p(t.originalPrice.toLocaleString()),1)):S("",!0)]),s("div",je,[s("div",De,[(a(),n(B,null,I(5,L=>r(h,{key:L,name:"star",class:"w-3 h-3 fill-current"})),64))]),s("span",ze,"("+p(t.rating)+")",1)])]),s("div",Ue,[r($,{variant:"outline",size:"sm",onClick:U(L=>P(t),["stop"]),disabled:t.stock===0},{default:k(()=>[r(h,{name:"plus",class:"w-4 h-4 mr-1"}),e[18]||(e[18]=C(" Add to Cart ",-1))]),_:1},8,["onClick","disabled"]),r($,{variant:"ghost",size:"sm",onClick:U(L=>E(t),["stop"])},{default:k(()=>[r(h,{name:"heart",class:V(Q(t.id)?"text-red-500 fill-current":"text-gray-400")},null,8,["class"])]),_:2},1032,["onClick"])])])]))),128))])):(a(),n("div",qe,[r(h,{name:"search",class:"w-16 h-16 text-gray-400 mx-auto mb-4"}),e[20]||(e[20]=s("h3",{class:"text-lg font-medium text-gray-900 mb-2"},"No sarees found",-1)),e[21]||(e[21]=s("p",{class:"text-gray-600 mb-4"},"Try adjusting your search or filter criteria",-1)),r($,{onClick:v},{default:k(()=>[...e[19]||(e[19]=[C("Clear Filters",-1)])]),_:1})]))]))}};export{Ke as default};
