import{r as h,f as P,o as z,p as k,a as m,c as g,b as e,h as n,w as f,t as u,e as D,i as O,v as V,F as C,d as R,m as J,k as w}from"./index-35c6b5bc.js";import{B as Q,A as p,E as W}from"./base-16152d6a.js";import{p as E}from"./products-4ee3ca03.js";class Y extends Q{async getDashboardStats(){try{const s=`${p.getDashboardBaseUrl()}${p.ENDPOINTS.DASHBOARD.STATS}`,r=await this.makeRequest(s);return this.handleResponse(r)}catch(s){return console.error("Get dashboard stats error:",s),{success:!1,message:"Failed to fetch dashboard statistics"}}}async getProducts(s={}){try{const r=new URLSearchParams;Object.keys(s).forEach(l=>{s[l]!==void 0&&s[l]!==null&&s[l]!==""&&r.append(l,s[l])});const d=`${p.getDashboardBaseUrl()}${p.ENDPOINTS.DASHBOARD.PRODUCTS}?${r}`,c=await this.makeRequest(d);return this.handleResponse(c)}catch(r){return console.error("Get products error:",r),{success:!1,message:W.PRODUCTS.FETCH_FAILED}}}async getCustomers(s={}){try{const r=new URLSearchParams;Object.keys(s).forEach(l=>{s[l]!==void 0&&s[l]!==null&&s[l]!==""&&r.append(l,s[l])});const d=`${p.getDashboardBaseUrl()}${p.ENDPOINTS.DASHBOARD.CUSTOMERS}?${r}`,c=await this.makeRequest(d);return this.handleResponse(c)}catch(r){return console.error("Get customers error:",r),{success:!1,message:"Failed to fetch customers"}}}async getOrders(s={}){try{const r=new URLSearchParams;Object.keys(s).forEach(l=>{s[l]!==void 0&&s[l]!==null&&s[l]!==""&&r.append(l,s[l])});const d=`${p.getDashboardBaseUrl()}${p.ENDPOINTS.DASHBOARD.ORDERS}?${r}`,c=await this.makeRequest(d);return this.handleResponse(c)}catch(r){return console.error("Get orders error:",r),{success:!1,message:"Failed to fetch orders"}}}async getInventory(s={}){try{const r=new URLSearchParams;Object.keys(s).forEach(l=>{s[l]!==void 0&&s[l]!==null&&s[l]!==""&&r.append(l,s[l])});const d=`${p.getDashboardBaseUrl()}${p.ENDPOINTS.DASHBOARD.INVENTORY}?${r}`,c=await this.makeRequest(d);return this.handleResponse(c)}catch(r){return console.error("Get inventory error:",r),{success:!1,message:"Failed to fetch inventory"}}}async createProduct(s){try{const r=`${p.getDashboardBaseUrl()}/api/method/draped_dreams.api.products.create_product`,d=await this.makeRequest(r,{method:"POST",body:JSON.stringify(s)});return this.handleResponse(d)}catch(r){return console.error("Create product error:",r),{success:!1,message:"Failed to create product"}}}async updateProduct(s,r){try{const d=`${p.getDashboardBaseUrl()}/api/method/draped_dreams.api.products.update_product`,c=await this.makeRequest(d,{method:"POST",body:JSON.stringify({product_id:s,...r})});return this.handleResponse(c)}catch(d){return console.error("Update product error:",d),{success:!1,message:"Failed to update product"}}}async deleteProduct(s){try{const r=`${p.getDashboardBaseUrl()}/api/method/draped_dreams.api.products.delete_product`,d=await this.makeRequest(r,{method:"POST",body:JSON.stringify({product_id:s})});return this.handleResponse(d)}catch(r){return console.error("Delete product error:",r),{success:!1,message:"Failed to delete product"}}}}const U=new Y,K={class:"min-h-screen bg-gray-50"},X={class:"bg-white shadow-sm border-b"},Z={class:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8"},ee={class:"flex justify-between items-center py-4"},te={class:"flex items-center"},se={class:"h-8 w-8 bg-purple-600 rounded-lg flex items-center justify-center mr-3"},oe={class:"flex items-center space-x-4"},ae={class:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8"},re={class:"flex justify-between items-center mb-8"},le={class:"grid grid-cols-1 md:grid-cols-4 gap-6 mb-8"},ne={class:"bg-white rounded-lg shadow p-6"},de={class:"flex items-center"},ie={class:"p-3 rounded-full bg-blue-100 text-blue-600"},ce={class:"ml-4"},ue={class:"text-2xl font-bold text-gray-900"},pe={class:"bg-white rounded-lg shadow p-6"},me={class:"flex items-center"},ge={class:"p-3 rounded-full bg-green-100 text-green-600"},ve={class:"ml-4"},xe={class:"text-2xl font-bold text-gray-900"},he={class:"bg-white rounded-lg shadow p-6"},fe={class:"flex items-center"},ye={class:"p-3 rounded-full bg-yellow-100 text-yellow-600"},_e={class:"ml-4"},we={class:"text-2xl font-bold text-gray-900"},be={class:"bg-white rounded-lg shadow p-6"},Pe={class:"flex items-center"},ke={class:"p-3 rounded-full bg-red-100 text-red-600"},Se={class:"ml-4"},De={class:"text-2xl font-bold text-gray-900"},Ce={key:0,class:"bg-red-50 border border-red-200 rounded-md p-4 mb-6"},Re={class:"flex"},Ae={class:"flex-shrink-0"},Oe={class:"ml-3"},Ve={class:"text-sm font-medium text-red-800"},Ee={class:"bg-white rounded-lg shadow"},Ue={class:"p-6"},Ne={class:"flex justify-between items-center mb-4"},$e={class:"flex items-center space-x-4"},qe=["value"],Be={key:0,class:"flex justify-center items-center py-12"},Ie={key:1,class:"overflow-x-auto"},Fe={class:"min-w-full divide-y divide-gray-200"},Te={class:"bg-white divide-y divide-gray-200"},Le={class:"px-6 py-4 whitespace-nowrap"},je={class:"flex items-center"},Me={class:"w-12 h-12 bg-gradient-to-br from-purple-100 to-pink-100 rounded-lg flex items-center justify-center flex-shrink-0"},Ge={class:"ml-4"},He={class:"text-sm font-medium text-gray-900"},ze={class:"text-sm text-gray-500"},Je={class:"px-6 py-4 whitespace-nowrap"},Qe={class:"px-6 py-4 whitespace-nowrap"},We={class:"text-sm text-gray-900"},Ye={key:0,class:"text-xs text-gray-500 line-through"},Ke={class:"px-6 py-4 whitespace-nowrap text-sm text-gray-900"},Xe={class:"px-6 py-4 whitespace-nowrap"},Ze={class:"px-6 py-4 whitespace-nowrap text-sm font-medium"},et={class:"flex items-center space-x-2"},tt={key:0,class:"fixed inset-0 bg-gray-600 bg-opacity-50 overflow-y-auto h-full w-full z-50"},st={class:"relative top-20 mx-auto p-5 border w-96 shadow-lg rounded-md bg-white"},ot={class:"mt-3"},at={class:"grid grid-cols-2 gap-4"},rt={class:"grid grid-cols-2 gap-4"},lt=["value"],nt={class:"flex justify-end space-x-3 pt-4"},ut={__name:"AdminProducts",setup(N){const s=h([]),r=h(""),d=h(""),c=h(!1),l=h(!1),v=h(""),S=h(["Silk","Cotton","Designer","Wedding","Casual","Party"]),i=h({name:"",description:"",price:"",originalPrice:"",category:"",stock:""}),$=P(()=>{let o=[...s.value];return r.value&&(o=o.filter(t=>t.product_name.toLowerCase().includes(r.value.toLowerCase())||t.description.toLowerCase().includes(r.value.toLowerCase()))),d.value&&(o=o.filter(t=>t.category===d.value)),o}),q=P(()=>s.value.filter(o=>o.stock_quantity>10).length),B=P(()=>s.value.filter(o=>o.stock_quantity>0&&o.stock_quantity<=10).length),I=P(()=>s.value.filter(o=>o.stock_quantity===0).length),F=o=>o===0?"danger":o<=10?"warning":"success",T=o=>o===0?"Out of Stock":o<=10?"Low Stock":"In Stock",L=async()=>{l.value=!0,v.value="";try{const o=await U.createProduct({product_name:i.value.name,description:i.value.description,category:i.value.category,price:parseFloat(i.value.price),original_price:i.value.originalPrice?parseFloat(i.value.originalPrice):null,stock_quantity:parseInt(i.value.stock),featured:!1});o.success?(i.value={name:"",description:"",price:"",originalPrice:"",category:"",stock:""},c.value=!1,await b()):v.value=o.message}catch(o){v.value="Failed to create product. Please try again.",console.error("Add product error:",o)}finally{l.value=!1}},j=o=>{console.log("Edit product:",o.name)},M=async o=>{if(confirm("Are you sure you want to delete this product?")){l.value=!0,v.value="";try{const t=await U.deleteProduct(o);t.success?await b():v.value=t.message}catch(t){v.value="Failed to delete product. Please try again.",console.error("Delete product error:",t)}finally{l.value=!1}}},b=async()=>{l.value=!0,v.value="";try{const o=await E.getProducts({category:d.value,search:r.value,limit:100});o.success?s.value=o.data||[]:v.value=o.message}catch(o){v.value="Failed to load products. Please try again.",console.error("Load products error:",o)}finally{l.value=!1}},G=async()=>{try{const o=await E.getCategories();o.success&&(S.value=o.data||[])}catch(o){console.error("Load categories error:",o)}};return z(async()=>{await G(),await b()}),(o,t)=>{const x=k("FeatherIcon"),y=k("Button"),_=k("TextInput"),A=k("Badge");return m(),g("div",K,[e("header",X,[e("div",Z,[e("div",ee,[e("div",te,[e("div",se,[n(x,{name:"shopping-bag",class:"text-white"})]),t[11]||(t[11]=e("h1",{class:"text-2xl font-bold text-gray-900"},"Draped Dreams Admin",-1))]),e("div",oe,[n(y,{variant:"ghost",size:"sm",onClick:t[0]||(t[0]=a=>o.$router.push("/home"))},{default:f(()=>[n(x,{name:"home",class:"w-5 h-5 mr-2"}),t[12]||(t[12]=w(" View Store ",-1))]),_:1}),t[13]||(t[13]=e("div",{class:"flex items-center space-x-2"},[e("div",{class:"w-8 h-8 bg-purple-200 rounded-full flex items-center justify-center text-purple-800 font-medium"}," A "),e("span",{class:"text-gray-700"},"Admin")],-1))])])])]),e("main",ae,[e("div",re,[t[15]||(t[15]=e("div",null,[e("h2",{class:"text-3xl font-bold text-gray-900"},"Product Management"),e("p",{class:"text-gray-600"},"Manage your saree inventory")],-1)),n(y,{onClick:t[1]||(t[1]=a=>c.value=!0)},{default:f(()=>[n(x,{name:"plus",class:"w-5 h-5 mr-2"}),t[14]||(t[14]=w(" Add New Product ",-1))]),_:1})]),e("div",le,[e("div",ne,[e("div",de,[e("div",ie,[n(x,{name:"shopping-bag",class:"w-6 h-6"})]),e("div",ce,[t[16]||(t[16]=e("p",{class:"text-sm font-medium text-gray-600"},"Total Products",-1)),e("p",ue,u(s.value.length),1)])])]),e("div",pe,[e("div",me,[e("div",ge,[n(x,{name:"check-circle",class:"w-6 h-6"})]),e("div",ve,[t[17]||(t[17]=e("p",{class:"text-sm font-medium text-gray-600"},"In Stock",-1)),e("p",xe,u(q.value),1)])])]),e("div",he,[e("div",fe,[e("div",ye,[n(x,{name:"alert-triangle",class:"w-6 h-6"})]),e("div",_e,[t[18]||(t[18]=e("p",{class:"text-sm font-medium text-gray-600"},"Low Stock",-1)),e("p",we,u(B.value),1)])])]),e("div",be,[e("div",Pe,[e("div",ke,[n(x,{name:"x-circle",class:"w-6 h-6"})]),e("div",Se,[t[19]||(t[19]=e("p",{class:"text-sm font-medium text-gray-600"},"Out of Stock",-1)),e("p",De,u(I.value),1)])])])]),v.value?(m(),g("div",Ce,[e("div",Re,[e("div",Ae,[n(x,{name:"alert-circle",class:"h-5 w-5 text-red-400"})]),e("div",Oe,[e("h3",Ve,u(v.value),1)])])])):D("",!0),e("div",Ee,[e("div",Ue,[e("div",Ne,[t[21]||(t[21]=e("h3",{class:"text-lg font-semibold text-gray-900"},"All Products",-1)),e("div",$e,[n(_,{modelValue:r.value,"onUpdate:modelValue":t[2]||(t[2]=a=>r.value=a),placeholder:"Search products...",class:"w-64",onInput:b},null,8,["modelValue"]),O(e("select",{"onUpdate:modelValue":t[3]||(t[3]=a=>d.value=a),onChange:b,class:"px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-purple-500"},[t[20]||(t[20]=e("option",{value:""},"All Categories",-1)),(m(!0),g(C,null,R(S.value,a=>(m(),g("option",{key:a,value:a},u(a),9,qe))),128))],544),[[V,d.value]])])]),l.value?(m(),g("div",Be,[...t[22]||(t[22]=[e("div",{class:"animate-spin rounded-full h-8 w-8 border-b-2 border-purple-600"},null,-1),e("span",{class:"ml-2 text-gray-600"},"Loading products...",-1)])])):(m(),g("div",Ie,[e("table",Fe,[t[23]||(t[23]=e("thead",{class:"bg-gray-50"},[e("tr",null,[e("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"}," Product "),e("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"}," Category "),e("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"}," Price "),e("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"}," Stock "),e("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"}," Status "),e("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"}," Actions ")])],-1)),e("tbody",Te,[(m(!0),g(C,null,R($.value,a=>(m(),g("tr",{key:a.name},[e("td",Le,[e("div",je,[e("div",Me,[n(x,{name:"image",class:"w-6 h-6 text-purple-400"})]),e("div",Ge,[e("div",He,u(a.product_name),1),e("div",ze,u(a.description),1)])])]),e("td",Je,[n(A,{variant:"secondary"},{default:f(()=>[w(u(a.category),1)]),_:2},1024)]),e("td",Qe,[e("div",We," ₹"+u(a.price),1),a.originalPrice?(m(),g("div",Ye," ₹"+u(a.originalPrice),1)):D("",!0)]),e("td",Ke,u(a.stock_quantity),1),e("td",Xe,[n(A,{variant:F(a.stock_quantity)},{default:f(()=>[w(u(T(a.stock_quantity)),1)]),_:2},1032,["variant"])]),e("td",Ze,[e("div",et,[n(y,{variant:"ghost",size:"sm",onClick:H=>j(a)},{default:f(()=>[n(x,{name:"edit",class:"w-4 h-4"})]),_:1},8,["onClick"]),n(y,{variant:"ghost",size:"sm",onClick:H=>M(a.name)},{default:f(()=>[n(x,{name:"trash-2",class:"w-4 h-4 text-red-600"})]),_:1},8,["onClick"])])])]))),128))])])]))])])]),c.value?(m(),g("div",tt,[e("div",st,[e("div",ot,[t[33]||(t[33]=e("h3",{class:"text-lg font-medium text-gray-900 mb-4"},"Add New Product",-1)),e("form",{onSubmit:J(L,["prevent"]),class:"space-y-4"},[e("div",null,[t[24]||(t[24]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Product Name *",-1)),n(_,{modelValue:i.value.name,"onUpdate:modelValue":t[4]||(t[4]=a=>i.value.name=a),placeholder:"Enter product name",required:""},null,8,["modelValue"])]),e("div",null,[t[25]||(t[25]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Description *",-1)),n(_,{modelValue:i.value.description,"onUpdate:modelValue":t[5]||(t[5]=a=>i.value.description=a),placeholder:"Enter product description",required:""},null,8,["modelValue"])]),e("div",at,[e("div",null,[t[26]||(t[26]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Price *",-1)),n(_,{modelValue:i.value.price,"onUpdate:modelValue":t[6]||(t[6]=a=>i.value.price=a),placeholder:"Enter price",required:""},null,8,["modelValue"])]),e("div",null,[t[27]||(t[27]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Original Price",-1)),n(_,{modelValue:i.value.originalPrice,"onUpdate:modelValue":t[7]||(t[7]=a=>i.value.originalPrice=a),placeholder:"Enter original price"},null,8,["modelValue"])])]),e("div",rt,[e("div",null,[t[29]||(t[29]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Category *",-1)),O(e("select",{"onUpdate:modelValue":t[8]||(t[8]=a=>i.value.category=a),class:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-purple-500",required:""},[t[28]||(t[28]=e("option",{value:""},"Select Category",-1)),(m(!0),g(C,null,R(S.value,a=>(m(),g("option",{key:a,value:a},u(a),9,lt))),128))],512),[[V,i.value.category]])]),e("div",null,[t[30]||(t[30]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Stock *",-1)),n(_,{modelValue:i.value.stock,"onUpdate:modelValue":t[9]||(t[9]=a=>i.value.stock=a),type:"number",placeholder:"Enter stock quantity",required:""},null,8,["modelValue"])])]),e("div",nt,[n(y,{variant:"outline",onClick:t[10]||(t[10]=a=>c.value=!1)},{default:f(()=>[...t[31]||(t[31]=[w(" Cancel ",-1)])]),_:1}),n(y,{type:"submit"},{default:f(()=>[...t[32]||(t[32]=[w(" Add Product ",-1)])]),_:1})])],32)])])])):D("",!0)])}}};export{ut as default};
