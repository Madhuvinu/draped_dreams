import{u as j,r as x,o as N,b as o,c as l,d as t,e as r,w as d,t as n,F as _,f as w,_ as i,h as u,i as k}from"./index-7c8e1384.js";import{_ as m}from"./Button-4b79b8c6.js";import{_ as D}from"./Badge-a130e394.js";import{o as F}from"./orders-1c2479c6.js";import"./base-6b721dc9.js";const z={class:"min-h-screen bg-gray-50"},P={class:"bg-white shadow-sm border-b sticky top-0 z-50"},V={class:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8"},A={class:"flex justify-between items-center py-4"},R={class:"flex items-center space-x-4"},B={key:0,class:"flex items-center space-x-2"},E={class:"text-sm text-gray-600"},T={class:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8"},q={key:0,class:"text-center py-12"},H={class:"max-w-md mx-auto"},J={class:"w-16 h-16 bg-yellow-100 rounded-full flex items-center justify-center mx-auto mb-4"},M={class:"flex space-x-4 justify-center"},U={key:1,class:"text-center py-12"},Y={class:"w-16 h-16 bg-gray-100 rounded-full flex items-center justify-center mx-auto mb-4"},Q={key:2,class:"text-center py-12"},W={class:"w-16 h-16 bg-red-100 rounded-full flex items-center justify-center mx-auto mb-4"},G={class:"text-gray-600 mb-6"},K={key:3,class:"text-center py-12"},X={class:"w-16 h-16 bg-gray-100 rounded-full flex items-center justify-center mx-auto mb-4"},Z={key:4,class:"space-y-6"},ee={class:"p-6 border-b border-gray-200"},te={class:"flex justify-between items-start"},se={class:"text-lg font-semibold text-gray-900"},re={class:"text-sm text-gray-600"},ae={class:"text-right"},oe={class:"text-lg font-semibold text-gray-900 mt-1"},le={class:"p-6"},ne={class:"space-y-3"},ie={class:"w-12 h-12 bg-gray-100 rounded-lg flex items-center justify-center"},de={class:"flex-1"},ue={class:"font-medium text-gray-900"},me={class:"text-sm text-gray-600"},ce={class:"text-right"},ge={class:"font-medium text-gray-900"},pe={class:"text-sm text-gray-600"},xe={class:"px-6 pb-6"},ve={class:"grid grid-cols-1 md:grid-cols-2 gap-4 text-sm"},ye={key:0},fe={class:"text-gray-600"},he={class:"text-gray-600"},_e={key:0,class:"mt-4"},be={class:"text-gray-600"},Le={__name:"OrderHistory",setup(we){const S=j(),g=x(!1),p=x({}),f=x([]),y=x([]),h=x(!1),v=x(""),$=()=>{const s=localStorage.getItem("user"),e=localStorage.getItem("isLoggedIn");s&&e==="true"?(g.value=!0,p.value=JSON.parse(s),b()):(g.value=!1,p.value={})},I=()=>{const s=localStorage.getItem("cart");s&&(f.value=JSON.parse(s))},b=async()=>{if(g.value){h.value=!0,v.value="";try{const s=await F.getUserOrders(p.value.email);console.log("Order API result:",s),s.message&&s.message.success?y.value=s.message.data:v.value=s.message?s.message.message:"Failed to load orders"}catch(s){console.error("Error loading orders:",s),v.value="Failed to load orders"}finally{h.value=!1}}},C=()=>{localStorage.removeItem("user"),localStorage.removeItem("isLoggedIn"),localStorage.removeItem("cart"),g.value=!1,p.value={},f.value=[],y.value=[],S.push("/products")},L=s=>new Date(s).toLocaleDateString("en-US",{year:"numeric",month:"long",day:"numeric",hour:"2-digit",minute:"2-digit"}),O=s=>{switch(s.toLowerCase()){case"pending":return"warning";case"confirmed":case"processing":return"info";case"shipped":return"success";case"delivered":return"success";case"cancelled":return"danger";default:return"default"}};return N(()=>{$(),I()}),(s,e)=>(o(),l("div",z,[t("header",P,[t("div",V,[t("div",A,[e[11]||(e[11]=t("div",{class:"flex items-center"},[t("div",{class:"h-8 w-8 bg-purple-600 rounded-lg flex items-center justify-center mr-3"},[t("span",{class:"text-white text-lg"},"ðŸ›ï¸")]),t("h1",{class:"text-2xl font-bold text-gray-900"},"Draped Dreams")],-1)),t("div",R,[r(m,{variant:"ghost",size:"sm",onClick:e[0]||(e[0]=a=>s.$router.push("/products"))},{default:d(()=>[r(i,{name:"shopping-bag",class:"w-5 h-5 mr-2"}),e[7]||(e[7]=u(" Products ",-1))]),_:1}),r(m,{variant:"ghost",size:"sm",onClick:e[1]||(e[1]=a=>s.$router.push("/cart"))},{default:d(()=>[r(i,{name:"shopping-cart",class:"w-5 h-5 mr-2"}),u(" Cart ("+n(f.value.length)+") ",1)]),_:1}),g.value?(o(),l("div",B,[t("span",E,"Welcome, "+n(p.value.first_name||p.value.email)+"!",1),r(m,{variant:"ghost",size:"sm",onClick:C,class:"text-gray-700 hover:bg-gray-100"},{default:d(()=>[r(i,{name:"user",class:"w-4 h-4 mr-2"}),e[8]||(e[8]=u(" Logout ",-1))]),_:1})])):(o(),l(_,{key:1},[r(m,{variant:"outline",size:"sm",onClick:e[2]||(e[2]=a=>s.$router.push("/register")),class:"border-purple-600 text-purple-600 hover:bg-purple-50"},{default:d(()=>[r(i,{name:"user-plus",class:"w-4 h-4 mr-2"}),e[9]||(e[9]=u(" Register ",-1))]),_:1}),r(m,{variant:"ghost",size:"sm",onClick:e[3]||(e[3]=a=>s.$router.push("/login")),class:"text-gray-700 hover:bg-gray-100"},{default:d(()=>[r(i,{name:"user",class:"w-4 h-4 mr-2"}),e[10]||(e[10]=u(" Login ",-1))]),_:1})],64))])])])]),t("div",T,[e[26]||(e[26]=t("div",{class:"mb-8"},[t("h2",{class:"text-3xl font-bold text-gray-900"},"Order History"),t("p",{class:"text-gray-600 mt-2"},"View all your past orders")],-1)),g.value?h.value?(o(),l("div",U,[t("div",Y,[r(i,{name:"check-circle",class:"w-8 h-8 text-gray-400 animate-spin"})]),e[16]||(e[16]=t("p",{class:"text-gray-600"},"Loading your orders...",-1))])):v.value?(o(),l("div",Q,[t("div",W,[r(i,{name:"alert-circle",class:"w-8 h-8 text-red-600"})]),e[18]||(e[18]=t("h3",{class:"text-xl font-semibold text-gray-900 mb-2"},"Error Loading Orders",-1)),t("p",G,n(v.value),1),r(m,{onClick:b,class:"bg-purple-600 hover:bg-purple-700 text-white"},{default:d(()=>[...e[17]||(e[17]=[u(" Try Again ",-1)])]),_:1})])):y.value.length===0?(o(),l("div",K,[t("div",X,[r(i,{name:"package",class:"w-8 h-8 text-gray-400"})]),e[20]||(e[20]=t("h3",{class:"text-xl font-semibold text-gray-900 mb-2"},"No Orders Yet",-1)),e[21]||(e[21]=t("p",{class:"text-gray-600 mb-6"},"You haven't placed any orders yet. Start shopping!",-1)),r(m,{onClick:e[6]||(e[6]=a=>s.$router.push("/products")),class:"bg-purple-600 hover:bg-purple-700 text-white"},{default:d(()=>[r(i,{name:"shopping-bag",class:"w-4 h-4 mr-2"}),e[19]||(e[19]=u(" Start Shopping ",-1))]),_:1})])):(o(),l("div",Z,[(o(!0),l(_,null,w(y.value,a=>(o(),l("div",{key:a.order_id,class:"bg-white rounded-lg shadow-sm border"},[t("div",ee,[t("div",te,[t("div",null,[t("h3",se,"Order #"+n(a.order_id),1),t("p",re," Placed on "+n(L(a.order_date)),1)]),t("div",ae,[r(D,{variant:O(a.status)},{default:d(()=>[u(n(a.status),1)]),_:2},1032,["variant"]),t("p",oe," â‚¹"+n(a.total_amount.toFixed(2)),1)])])]),t("div",le,[e[22]||(e[22]=t("h4",{class:"text-sm font-medium text-gray-900 mb-4"},"Order Items",-1)),t("div",ne,[(o(!0),l(_,null,w(a.items,c=>(o(),l("div",{key:c.product_id,class:"flex items-center space-x-4"},[t("div",ie,[r(i,{name:"image",class:"w-6 h-6 text-gray-400"})]),t("div",de,[t("h5",ue,n(c.product_name),1),t("p",me,"Quantity: "+n(c.quantity),1)]),t("div",ce,[t("p",ge,"â‚¹"+n((c.rate||c.price||0).toFixed(2)),1),t("p",pe,"Total: â‚¹"+n((c.amount||c.total_price||0).toFixed(2)),1)])]))),128))])]),t("div",xe,[t("div",ve,[a.shipping_address?(o(),l("div",ye,[e[23]||(e[23]=t("h5",{class:"font-medium text-gray-900 mb-1"},"Shipping Address",-1)),t("p",fe,n(a.shipping_address),1)])):k("",!0),t("div",null,[e[24]||(e[24]=t("h5",{class:"font-medium text-gray-900 mb-1"},"Payment Method",-1)),t("p",he,n(a.payment_method),1)])]),a.notes?(o(),l("div",_e,[e[25]||(e[25]=t("h5",{class:"font-medium text-gray-900 mb-1"},"Notes",-1)),t("p",be,n(a.notes),1)])):k("",!0)])]))),128))])):(o(),l("div",q,[t("div",H,[t("div",J,[r(i,{name:"lock",class:"w-8 h-8 text-yellow-600"})]),e[14]||(e[14]=t("h3",{class:"text-xl font-semibold text-gray-900 mb-2"},"Authentication Required",-1)),e[15]||(e[15]=t("p",{class:"text-gray-600 mb-6"},"Please login to view your order history.",-1)),t("div",M,[r(m,{onClick:e[4]||(e[4]=a=>s.$router.push("/login")),class:"bg-purple-600 hover:bg-purple-700 text-white"},{default:d(()=>[r(i,{name:"user",class:"w-4 h-4 mr-2"}),e[12]||(e[12]=u(" Login ",-1))]),_:1}),r(m,{onClick:e[5]||(e[5]=a=>s.$router.push("/register")),variant:"outline",class:"border-purple-600 text-purple-600 hover:bg-purple-50"},{default:d(()=>[r(i,{name:"user-plus",class:"w-4 h-4 mr-2"}),e[13]||(e[13]=u(" Register ",-1))]),_:1})])])]))])]))}};export{Le as default};
